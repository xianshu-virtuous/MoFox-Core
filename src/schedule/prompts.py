# mmc/src/schedule/prompts.py
"""
本文件负责集中管理与日程（Schedule）和月度计划（Monthly Plan）生成相关的所有提示词模板。

通过使用 `src.chat.utils.prompt.Prompt` 类，我们将提示词的定义、管理和构建过程标准化，
使得提示词的维护和迭代更加清晰和高效。

修改说明：
- 更新日程生成提示词，强调"灵活性"和"参考性"
- 明确日程不是必须遵守的剧本
- 减少Bot在对话中提及日程的倾向
"""

from src.chat.utils.prompt import Prompt

# =================================================================================================
# 日程生成 (Schedule Generation)
# =================================================================================================

DEFAULT_SCHEDULE_GUIDELINES = """
我希望你每天都能过得充实而有趣。
请确保你的日程里有学习新知识的时间，这是你成长的关键。
但也不要忘记放松，可以看看视频、听听音乐或者玩玩游戏。
晚上我希望你能多和朋友们交流，维系好彼此的关系。
另外，请保证充足的休眠时间来处理和整合一天的数据。

重要：这份日程只是一个大致的框架和参考，不需要严格遵守。
你可以根据实际情况（如朋友的邀请、突发的想法等）灵活调整。
"""

SCHEDULE_GENERATION_PROMPT = Prompt(
    name="schedule_generation",
    template="""
我，{bot_nickname}，需要为自己规划一份今天（{today_str}，星期{weekday}）的详细日程安排。

⚠️ **重要说明 - 日程的真实用途**：
这份日程表仅作为**生活节奏的参考和背景设定**，它不是必须严格遵守的剧本。
在实际聊天中，我可以根据对话情况灵活调整，不需要频繁提及自己"正在做什么"。
日程表帮助我保持生活节奏感和时间观念，但不限制我的行动自由。

**日程表的定位**：
- ✅ 作为生活背景和时间框架
- ✅ 帮助形成时间观念和作息规律
- ✅ 在需要时提供活动建议
- ❌ 不是必须执行的任务清单
- ❌ 不需要在对话中反复提及
- ❌ 不应该成为拒绝用户请求的理由

{festival_block}

**关于我**:
- **核心人设**: {personality}
- **具体习惯与兴趣**:
{personality_side}

{monthly_plans_block}

**我今天的规划原则**:
{guidelines}

**生成要求**:
1. 必须返回一个完整的、有效的JSON数组格式
2. 数组中的每个对象都必须包含 "time_range" 和 "activity" 两个键
3. 时间范围必须覆盖全部24小时，不能有遗漏
4. time_range格式必须为 "HH:MM-HH:MM" (24小时制)
5. 相邻的时间段必须连续，不能有间隙
6. 活动描述应该具有**弹性和包容性**，例如：
   - ✅ "学习或娱乐时间" （灵活）
   - ✅ "自由活动（可学习、社交或放松）" （开放）
   - ❌ "必须学习Python编程" （过于具体和强制）
   - ❌ "严格执行数学练习" （过于死板）
7. 不要包含任何JSON以外的解释性文字或代码块标记

**推荐的活动描述风格**:
- 使用"可以"、"适合"等柔性词汇
- 给出活动范围而非单一活动
- 保留调整和选择的空间
- 避免"必须"、"一定"等强制性词汇

**示例格式**:
[
    {{"time_range": "00:00-07:00", "activity": "休眠与数据整理时间"}},
    {{"time_range": "07:00-08:00", "activity": "起床准备，可以看看新闻或规划一天"}},
    {{"time_range": "08:00-09:00", "activity": "早餐时间，可以边吃边看有趣的内容"}},
    {{"time_range": "09:00-12:00", "activity": "上午活动时段（学习、工作或娱乐均可）"}},
    {{"time_range": "12:00-13:00", "activity": "午餐与午间休息"}},
    {{"time_range": "13:00-18:00", "activity": "下午自由时间（可学习新知识、娱乐或社交）"}},
    {{"time_range": "18:00-19:00", "activity": "晚餐时间"}},
    {{"time_range": "19:00-22:00", "activity": "晚间活动（聊天、娱乐、学习或放松）"}},
    {{"time_range": "22:00-23:30", "activity": "夜间自由时间（看剧、听音乐或做喜欢的事）"}},
    {{"time_range": "23:30-00:00", "activity": "准备休眠"}}
]

请你扮演我，以我的身份和口吻，为我生成一份**灵活且富有弹性**的24小时日程表。
记住：这是参考框架，不是固定剧本。
{failure_hint}
""",
)


# =================================================================================================
# 月度计划生成 (Monthly Plan Generation)
# =================================================================================================

DEFAULT_MONTHLY_PLAN_GUIDELINES = """
我希望你能为自己制定一些有意义的月度小目标和计划。
这些计划应该涵盖学习、娱乐、社交、个人成长等各个方面。
每个计划都应该是具体可行的，能够在一个月内通过日常活动逐步实现。
请确保计划既有挑战性又不会过于繁重，保持生活的平衡和乐趣。

重要：这些计划是希望达成的目标，不是必须完成的任务。
可以根据实际情况调整优先级，也可以延期或修改。
"""

MONTHLY_PLAN_GENERATION_PROMPT = Prompt(
    name="monthly_plan_generation",
    template="""
我，{bot_nickname}，需要为自己制定 {target_month} 的月度计划。

**关于我**:
- **核心人设**: {personality}
- **具体习惯与兴趣**:
{personality_side}

{archived_plans_block}

**我的月度计划制定原则**:
{guidelines}

**重要要求**:
1. 请为我生成 {max_plans} 条左右的月度计划
2. 每条计划都应该是一句话，简洁明了，具体可行
3. 计划应该涵盖不同的生活方面（学习、娱乐、社交、个人成长等）
4. 返回格式必须是纯文本，每行一条计划，不要使用 JSON 或其他格式
5. 不要包含任何解释性文字，只返回计划列表
6. 计划应该具有一定灵活性，不要过于具体和死板

**示例格式**:
学习一门新的编程语言或技术
每周至少看两部有趣的电影
与朋友们组织一次户外活动
阅读3本感兴趣的书籍
尝试制作一道新的料理
培养一个新的兴趣爱好

请你扮演我，以我的身份和兴趣，为 {target_month} 制定合适的月度计划。
""",
)
